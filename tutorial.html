<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Introducing Farmhash.Sharp
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Port of Google's farm hash algorithm"/>
    <meta name="author" content="Nick Babcock"/>
    <link rel="icon" href="/Farmhash.Sharp/favicon.ico">
    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/Farmhash.Sharp/content/style.css" />
    <script type="text/javascript" src="/Farmhash.Sharp/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/nickbabcock/Farmhash.Sharp">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/Farmhash.Sharp/index.html">Farmhash.Sharp</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Introducing-Farmhash-Sharp" class="anchor" href="#Introducing-Farmhash-Sharp">Introducing Farmhash.Sharp</a></h1>
<p>As mentioned on the home page, Farmhash.Sharp is an extremly simple, low-
level, and blazingly fast library for computing <a href="https://github.com/google/farmhash">Google's Farmhash</a>
algorithm for .NET</p>
<p>Let's start out simple. Let's compute the 32 and 64bit hash of 'hi'.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;Farmhash.Sharp.dll&quot;</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">Farmhash</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">Sharp</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">text</span> <span class="o">=</span> <span class="s">&quot;hi&quot;</span>
</code></pre></td>
</tr>
</table>
<p>Farmhash only works with bytes and our text is composed of characters. To get
bytes from our text, we need to decide on the encoding. Common examples are
ASCII, UTF-8, and Windows-1252. In this tutorial, we're going to keep things
simple and assume that our text is encoded as ASCII</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">Text</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="i">bytes</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="t">Encoding</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="i">ASCII</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 9)" onmouseover="showTip(event, 'fs9', 9)" class="f">GetBytes</span>(<span onmouseout="hideTip(event, 'fs3', 10)" onmouseover="showTip(event, 'fs3', 10)" class="i">text</span>)
</code></pre></td>
</tr>
</table>
<p>With our bytes handy, it is now time to calculate the hash! Choosing which
hash to use may be the hardest decision in this library. If you need the
lowest probability of collisions, then your choice is simple, go with Hash64.
If you need the fastest speed then it depends on the architecture of the
machine being ran on and how your project is compiled:</p>
<ul>
<li>A project executed on a 32bit machine should always prefer Hash32.</li>
<li>A project executed on a 64bit machine, but prefers 32bit, should use Hash32</li>
<li>
A project executed on a 64bit machine, but doesn't prefer 32bit, should
always use Hash64, even if only a 32bit hash is wanted. The 64bit hash is
always faster.
</li>
</ul>
<p>For more information on disabling the 32bit preference, see the following <a href="http://www.neovolve.com/2015/07/31/disable-prefer-32-bit/">blog
post</a>.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="i">``32bit hash``</span> <span class="o">:</span> <span class="i">uint</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 12)" onmouseover="showTip(event, 'fs11', 12)" class="t">Farmhash</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 13)" onmouseover="showTip(event, 'fs12', 13)" class="f">Hash32</span>(<span onmouseout="hideTip(event, 'fs6', 14)" onmouseover="showTip(event, 'fs6', 14)" class="i">bytes</span>, <span onmouseout="hideTip(event, 'fs13', 15)" onmouseover="showTip(event, 'fs13', 15)" class="t">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 16)" onmouseover="showTip(event, 'fs14', 16)" class="f">length</span> <span class="i">nd</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 17)" onmouseover="showTip(event, 'fs15', 17)" class="i">``64bit hash``</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs16', 18)" onmouseover="showTip(event, 'fs16', 18)" class="t">uint64</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 19)" onmouseover="showTip(event, 'fs11', 19)" class="t">Farmhash</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 20)" onmouseover="showTip(event, 'fs17', 20)" class="f">Hash64</span>(<span onmouseout="hideTip(event, 'fs6', 21)" onmouseover="showTip(event, 'fs6', 21)" class="i">bytes</span>, <span onmouseout="hideTip(event, 'fs13', 22)" onmouseover="showTip(event, 'fs13', 22)" class="t">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 23)" onmouseover="showTip(event, 'fs14', 23)" class="f">length</span> <span class="i">nd</span>)

<span onmouseout="hideTip(event, 'fs18', 24)" onmouseover="showTip(event, 'fs18', 24)" class="f">printfn</span> <span class="s">&quot;32bit hash: </span><span class="pf">%x</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs10', 25)" onmouseover="showTip(event, 'fs10', 25)" class="i">``32bit hash``</span>
<span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="f">printfn</span> <span class="s">&quot;64bit hash: </span><span class="pf">%x</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs15', 27)" onmouseover="showTip(event, 'fs15', 27)" class="i">``64bit hash``</span>
</code></pre></td>
</tr>
</table>
<p>Congratulations, you're now an expert at using the Farmhash.Sharp library!</p>

<div class="tip" id="fs1">namespace Farmhash</div>
<div class="tip" id="fs2">namespace Farmhash.Sharp</div>
<div class="tip" id="fs3">val text : string<br /><br />Full name: Tutorial.text</div>
<div class="tip" id="fs4">namespace System</div>
<div class="tip" id="fs5">namespace System.Text</div>
<div class="tip" id="fs6">val bytes : byte []<br /><br />Full name: Tutorial.bytes</div>
<div class="tip" id="fs7">type Encoding =<br />&#160;&#160;member BodyName : string<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CodePage : int<br />&#160;&#160;member DecoderFallback : DecoderFallback with get, set<br />&#160;&#160;member EncoderFallback : EncoderFallback with get, set<br />&#160;&#160;member EncodingName : string<br />&#160;&#160;member Equals : value:obj -&gt; bool<br />&#160;&#160;member GetByteCount : chars:char[] -&gt; int + 3 overloads<br />&#160;&#160;member GetBytes : chars:char[] -&gt; byte[] + 5 overloads<br />&#160;&#160;member GetCharCount : bytes:byte[] -&gt; int + 2 overloads<br />&#160;&#160;...<br /><br />Full name: System.Text.Encoding</div>
<div class="tip" id="fs8">property Encoding.ASCII: Encoding</div>
<div class="tip" id="fs9">Encoding.GetBytes(s: string) : byte []<br />Encoding.GetBytes(chars: char []) : byte []<br />Encoding.GetBytes(chars: char [], index: int, count: int) : byte []<br />Encoding.GetBytes(chars: nativeptr&lt;char&gt;, charCount: int, bytes: nativeptr&lt;byte&gt;, byteCount: int) : int<br />Encoding.GetBytes(s: string, charIndex: int, charCount: int, bytes: byte [], byteIndex: int) : int<br />Encoding.GetBytes(chars: char [], charIndex: int, charCount: int, bytes: byte [], byteIndex: int) : int</div>
<div class="tip" id="fs10">val ( 32bit hash ) : uint32<br /><br />Full name: Tutorial.( 32bit hash )</div>
<div class="tip" id="fs11">type Farmhash =<br />&#160;&#160;static member Hash32 : s:string -&gt; uint64 + 1 overload<br />&#160;&#160;static member Hash64 : s:string -&gt; uint64 + 1 overload<br /><br />Full name: Farmhash.Sharp.Farmhash</div>
<div class="tip" id="fs12">Farmhash.Hash32(s: string) : uint64<br />Farmhash.Hash32(s: byte [], len: int) : uint32</div>
<div class="tip" id="fs13">module Array<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs14">val length : array:&#39;T [] -&gt; int<br /><br />Full name: Microsoft.FSharp.Collections.Array.length</div>
<div class="tip" id="fs15">val ( 64bit hash ) : uint64<br /><br />Full name: Tutorial.( 64bit hash )</div>
<div class="tip" id="fs16">Multiple items<br />val uint64 : value:&#39;T -&gt; uint64 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.uint64<br /><br />--------------------<br />type uint64 = System.UInt64<br /><br />Full name: Microsoft.FSharp.Core.uint64</div>
<div class="tip" id="fs17">Farmhash.Hash64(s: string) : uint64<br />Farmhash.Hash64(s: byte [], len: int64) : uint64</div>
<div class="tip" id="fs18">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>

        </div>
        <div class="span3">
          <img src="/Farmhash.Sharp/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">Farmhash.Sharp</li>
            <li><a href="/Farmhash.Sharp/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/Farmhash.Sharp">Get Library via NuGet</a></li>
            <li><a href="http://github.com/nickbabcock/Farmhash.Sharp">Source Code on GitHub</a></li>
            <li><a href="/Farmhash.Sharp/license.html">License</a></li>
            <li><a href="/Farmhash.Sharp/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/Farmhash.Sharp/tutorial.html">Sample tutorial</a></li>

            <li class="nav-header">Documentation</li>
              <li><a href="/Farmhash.Sharp/reference/index.html">API Reference</a></li>
              <li><a href="/Farmhash.Sharp/benchmarks.html">Benchmarks</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/nickbabcock/Farmhash.Sharp"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
